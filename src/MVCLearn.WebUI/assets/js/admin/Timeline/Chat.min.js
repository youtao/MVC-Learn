function onresize(){var t=$(window),n=$("#input-area"),i=$("#chat-conversation"),r=t.height()-n.outerHeight();i.css("height",r).scrollTop($("#chat-conversation")[0].scrollHeight);n.show()}$(function(){$.getScript(GlobalConfig.SignalrHub,function(){var t=$("#chat-input").outerHeight(),n,i;onresize();$(window).resize(onresize);$("#chat-input").resize(onresize);n=new Vue({el:"#chat-app",data:{messages:[]}});$.connection.hub.url=GlobalConfig.SignalR;i=$.connection.chatHub;i.client.sendMessages=function(t,i){n.messages.push({aligned:"left-aligned",icon:"fa-lastfm",username:"",time:moment().format("HH:mm:ss"),content:i})};$.connection.hub.start();$("#send-messages").click(function(){var r=$("#chat-input").text();$("#chat-input").text("");n.messages.push({aligned:"right-aligned",icon:"fa-database",username:"",time:moment().format("HH:mm:ss"),content:r});i.server.sendMessages(r);$("#send-messages").attr("disabled","disabled");t=$(this).outerHeight()});$("#chat-conversation").perfectScrollbar();$("div.chat-input").perfectScrollbar();$("#chat-input").bind("input propertychange",function(){$(this).outerHeight()!==t&&($("#chat-conversation").perfectScrollbar("update"),$("#chat-conversation").scrollTop($("#chat-conversation")[0].scrollHeight),onresize());t=$(this).outerHeight();var n=$(this).text();n.trim().length>0?$("#send-messages").removeAttr("disabled"):$("#send-messages").attr("disabled","disabled")});n.$watch("messages",function(){$("#chat-conversation").perfectScrollbar("update");$("#chat-conversation").scrollTop($("#chat-conversation")[0].scrollHeight);onresize()})})});